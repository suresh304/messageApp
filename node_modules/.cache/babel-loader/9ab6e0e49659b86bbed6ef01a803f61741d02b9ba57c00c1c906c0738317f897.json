{"ast":null,"code":"import _objectSpread from\"/home/allisuresh/messageApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/allisuresh/messageApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/allisuresh/messageApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/allisuresh/messageApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{addDoc,collection,doc,onSnapshot,orderBy,query,Timestamp,updateDoc,where}from\"firebase/firestore\";import React,{useEffect,useState}from\"react\";import{useAuthState}from\"react-firebase-hooks/auth\";import{auth,db}from\"./firebase\";import Message from\"./Message\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Chat(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),msgs=_useState4[0],setMsgs=_useState4[1];var chatstyle={width:\"100%\",height:\"80vh\",backgroundColor:\"grey\",borderRadius:\"20px\",overflow:\"scroll\"};var inputstyles={width:\"90%\",height:\"7vh\",backgroundColor:\"smoke-white\",borderRadius:\"8px\",overFlow:\"scroll\",fontSize:\"1em\"};var sendbutton={width:\"10%\",height:\"7.5vh\",fontSize:\"1em\",backgroundColor:\"#2fffff\"};var addMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,send){var _send$target;var docref;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e?e.preventDefault():send.isDefaultPrevented();e?setMsg(e.target.value):setMsg(document.getElementById(\"input\").value);if(!(e.code===\"Enter\"||(send===null||send===void 0?void 0:(_send$target=send.target)===null||_send$target===void 0?void 0:_send$target.innerHTML)==\"send\")){_context.next=9;break;}document.getElementById(\"input\").value=\"\";_context.next=6;return addDoc(collection(db,\"messages\"),{msg:msg,user:user.displayName,uid:user.uid,sentTime:new Date()});case 6:docref=_context.sent;_context.next=9;return updateDoc(docref,{docid:docref.id});case 9:case\"end\":return _context.stop();}},_callee);}));return function addMessage(_x,_x2){return _ref.apply(this,arguments);};}();var textmsg=[];useEffect(function(){var q=query(collection(db,\"messages\"),orderBy(\"sentTime\"));var unsub=onSnapshot(q,function(querySnapshot){var messages=[];querySnapshot.forEach(function(doc){return messages.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setMsgs(messages);});return function(){return unsub();};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:chatstyle,children:msgs&&msgs.map(function(m,i){return/*#__PURE__*/_jsx(Message,{msg:m},i);})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"input\",placeholder:\"Type here,some one is waiting for your text!!\",style:inputstyles,onKeyUp:function onKeyUp(e){return addMessage(e,\"\");}}),/*#__PURE__*/_jsx(\"button\",{style:sendbutton,onClick:function onClick(e){return addMessage(\"\",e);},children:\"send\"})]})]});}export default Chat;","map":{"version":3,"names":["addDoc","collection","doc","onSnapshot","orderBy","query","Timestamp","updateDoc","where","React","useEffect","useState","useAuthState","auth","db","Message","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chat","_useAuthState","_useAuthState2","_slicedToArray","user","_useState","_useState2","msg","setMsg","_useState3","_useState4","msgs","setMsgs","chatstyle","width","height","backgroundColor","borderRadius","overflow","inputstyles","overFlow","fontSize","sendbutton","addMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","send","_send$target","docref","wrap","_callee$","_context","prev","next","preventDefault","isDefaultPrevented","target","value","document","getElementById","code","innerHTML","displayName","uid","sentTime","Date","sent","docid","id","stop","_x","_x2","apply","arguments","textmsg","q","unsub","querySnapshot","messages","forEach","push","_objectSpread","data","children","style","map","m","i","display","flexDirection","type","placeholder","onKeyUp","onClick"],"sources":["/home/allisuresh/messageApp/src/Chat.js"],"sourcesContent":["import {\n  addDoc,\n  collection,\n  doc,\n  onSnapshot,\n  orderBy,\n  query,\n  Timestamp,\n  updateDoc,\n  where,\n} from \"firebase/firestore\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db } from \"./firebase\";\nimport Message from \"./Message\";\n\nfunction Chat() {\n  const [user] = useAuthState(auth);\n  const [msg, setMsg] = useState(\"\");\n  const [msgs, setMsgs] = useState();\n  const chatstyle = {\n    width: \"100%\",\n    height: \"80vh\",\n    backgroundColor: \"grey\",\n    borderRadius: \"20px\",\n    overflow: \"scroll\",\n  };\n  const inputstyles = {\n    width: \"90%\",\n    height: \"7vh\",\n    backgroundColor: \"smoke-white\",\n    borderRadius: \"8px\",\n    overFlow: \"scroll\",\n    fontSize: \"1em\",\n  };\n  const sendbutton = {\n    width: \"10%\",\n    height: \"7.5vh\",\n    fontSize: \"1em\",\n    backgroundColor: \"#2fffff\",\n  };\n  const addMessage = async (e,send) => {\n    e?e.preventDefault():send.isDefaultPrevented();\n    e?setMsg(e.target.value):setMsg(document.getElementById(\"input\").value);\n\n    if (e.code === \"Enter\" || send?.target?.innerHTML ==\"send\") {\n      document.getElementById(\"input\").value = \"\";\n\n      const docref = await addDoc(collection(db, \"messages\"), {\n        msg: msg,\n        user: user.displayName,\n        uid: user.uid,\n        sentTime: new Date(),\n      });\n      await updateDoc(docref, {\n        docid: docref.id,\n      });\n    }\n  };\n\n  let textmsg = [];\n  useEffect(() => {\n    const q = query(collection(db, \"messages\"), orderBy(\"sentTime\"));\n    const unsub = onSnapshot(q, (querySnapshot) => {\n      let messages = [];\n      querySnapshot.forEach((doc) =>\n        messages.push({ ...doc.data(), id: doc.id })\n      );\n      setMsgs(messages);\n    });\n    return () => unsub();\n  }, []);\n\n  return (\n    <>\n      <div style={chatstyle}>\n        {msgs && msgs.map((m,i) => <Message key={i} msg={m} />)}\n      </div>\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n        <input\n          type=\"text\"\n          id=\"input\"\n          placeholder=\"Type here,some one is waiting for your text!!\"\n          style={inputstyles}\n          onKeyUp={(e) => addMessage(e,\"\")}\n        />\n        <button style={sendbutton} onClick={(e)=>addMessage(\"\",e)}>send</button>\n      </div>\n    </>\n  );\n}\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}